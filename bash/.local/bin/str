#!/bin/bash

RET_URL=0

while getopts "u" OPT; do
	case ${OPT} in
		u)
			RET_URL=${OPTARG}
			;;
	esac
done
shift $((OPTIND-1))

service="$1"
nick="$2"
quality="$3"

if [ -n "$service" ]; then
	case "$service" in
		"tw" | "twitch")
			host="twitch.tv"
			;;
		"yt" | "youtube")
			host="youtube.com"
			;;
		*)
			>2 printf "Wrong service: %s. Setting to twitch.tv.\n" "$service"
			host="twitch.tv"
			;;
	esac
else
	host="twitch.tv"
fi

if [ -z "$quality" ]; then
	quality="best"
fi
	
case "$nick" in
	"baumi")
		nick="l34um1"
		;;
	"gog")
		nick="gogcom"
		;;
	*)
		;;
esac

url="$host"/"$nick" 

if [[ ! $RET_URL ]]
then
	echo $url
else
	streamlink $url "$quality"
fi

